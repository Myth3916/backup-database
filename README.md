# Домашнее задание: Резервное копирование баз данных - Шаров Олег

## Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования.

### Ответы

#### 1.1. Восстановление данных в полном объёме за предыдущий день

**Решение:** Ежедневное полное резервное копирование (Full Backup).

**Обоснование:**
- Каждую ночь (например, в 02:00) выполняется полная копия всей базы данных.
- При поломке утром достаточно восстановить один файл бэкапа за предыдущие сутки.
- Простота восстановления: не требуется цепочка файлов, как при инкрементном/дифференциальном подходе.

**Пример команды (PostgreSQL):**
```bash
pg_dump -U postgres finance_db > /backup/finance_db_$(date +%F).sql

#### 1.2. Восстановление данных за час до предполагаемой поломки
**Решение** : PITR (Point-in-Time Recovery) на основе:
1. Базового полного бэкапа
2. Непрерывной архивации логов транзакций (WAL для PostgreSQL, binlog для MySQL)
**Обоснование** :
- Полный бэкап создаётся раз в сутки (базовая точка).
- Логи транзакций архивируются непрерывно (каждые несколько секунд/минут).
- При восстановлении можно указать точное время (например, 2026-02-19 09:00:00), чтобы вернуть состояние БД на час до поломки.
- Минимизирует потерю данных — критично для финансовых систем.
**Пример настройки WAL-архивации (PostgreSQL)** :

```ini
# postgresql.conf
archive_mode = on
archive_command = 'cp %p /backup/wal/%f'
```


